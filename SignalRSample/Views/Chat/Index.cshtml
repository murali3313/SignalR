@model dynamic

<script type="text/javascript">

    var SignalRChat = function (connection) {
       this.chat = connection.chat;
       this.chatHub = connection.hub;
    };

    SignalRChat.prototype = {
        initialize: function () {
            var that = this;
            that.chat.client.addMessage = function (messageFromServer) {
                that.AppendVaueToHistory(messageFromServer);
            };
            that.chatHub.start().done(function () {
                that.AppendVaueToHistory("Connected");
            });
        },
        postMessage: function(message) {
            this.chat.server.send(message);
        },
        AppendVaueToHistory : function(message) {
            var chatHistory = $("#chatHistory");
            var chatHistoryValue = chatHistory.val();
            chatHistoryValue += message + "\r\n";
            chatHistory.val(chatHistoryValue);
        }

    };
    var chat;
    $(function() {
        chat= new SignalRChat($.connection);
        chat.initialize();
    });
  
  
</script>
<table>
    <tr>
        <td>
            <span></span>
        </td>
        <td></td>
    </tr>
    <tr>
        <td colspan="2">
            <textarea name="chatMessage" cols="100" rows="30" id="chatHistory">
</textarea>
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" placeholder="Your message here" style="width: 100%" id="chatMessage" />
        </td>
        <td>
            <input type="submit" value="Post your mnesage" onclick="chat.postMessage($('#chatMessage').val())"/>
        </td>
    </tr>
</table>